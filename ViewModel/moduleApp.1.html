<div id="backGround"></div>
<div id="wrapper" class="active" style="position: relative">
    <div id="sidebar-wrapper" class="center unli">
        <div id="sidebar-wrapper-menu">
            <div id="sidebar-wrapper-menu-nav">
                <div class="margin-bottom">
                    <a id="menu-toggle" href="#"><span id="main_icon"><i class="fa fa-bars ham-position" aria-hidden="true"></i></span></a>
                </div>
                <div id="userBox" class="margin-bottom">
                    <img id="userAvatar" src="Theme/Images/icon_people/{{userAvatar}}.png" alt="" style="width:60px;"/>
                    <div id="userInformation" class="margin-bottom">
                        <ul style="padding-left: 0px;">
                            <li>{{userName}} {{userSurname}}</li>
                        </ul>
                    </div>
                </div>
                <div id="userBox_small" class="margin-bottom remove">
                    <div id="inicjaly">AC</div>
                </div>
                <div id="Intelect">
                    <div id="mainIntelect">
                        <ul id="intelect_main_icon" class="intelect_main_icon">
                            <li id="intelect_main_icon_li"><a id="intelect_Main" href="#"><center><img src="/Theme/Images/Avatars/compress_intelect_Paint_mini.png" alt="avatar"></center></li>
                        </ul>
                    </div>
                    <div id="otherIntelect">
                        <div>
                            <ul class="intelect_icons">
                                <li><a id="intelect_Music" href="#"><center><img src="/Theme/Images/Avatars/compress_intelect_Music_mini.png" alt="avatar"></center></a></li>
                                <li><a id="intelect_Paint" href="#"><center><img src="/Theme/Images/Avatars/compress_intelect_Paint_mini.png" alt="avatar"></center></a></li>
                                <li><a id="intelect_Sport" href="#"><center><img src="/Theme/Images/Avatars/compress_intelect_Sport_mini.png" alt="avatar"></center></a></li>
                            </ul>
                        </div>
                        <div>
                            <ul class="intelect_icons">
                                <li><center><img src="/Theme/Images/Avatars/compress_intelect_Kondu_mini.png" alt="avatar"></center></li>
                                <li><center><img src="/Theme/Images/Avatars/compress_intelect_Ling_mini.png" alt="avatar"></center></li>
                                <li><center><img src="/Theme/Images/Avatars/compress_intelect_Inter_mini.png" alt="avatar"></center></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="userFunction">
                    <ul style="padding-left: 0px;">
                        <li><a href="#"><span class="">Mapa Postępu</span>&nbsp;<i class="fa fa-lg fa-map-o menu_icons" aria-hidden="true"></i></a></li>
                        <li><a href="#"><span>Twoja ścieżka</span>&nbsp;<i class="fa fa-lg fa-map-signs menu_icons" aria-hidden="true"></i></a></li>
                        <li><a href="#"><span>Pomoc</span>&nbsp;<i class="fa fa-lg fa-question menu_icons" aria-hidden="true"></i></a></li>
                    </ul>
                </div>
                <div id="logout" title="Czy na pewno chcesz opuścić kurs?">
                    <a href="?page=login" onclick="VM.logout();"><span>Wyloguj</span>&nbsp;<i class="fa fa-power-off menu_icons" aria-hidden="true"></i></a>
                </div>
            </div>
        </div>
        <div id="sidebar-wrapper-path">
            <div class="margin-bottom">
                <a id="patch-toggle" class="patch-toggle_active" href="#"><span id="main_icon"><i class="fa fa-bars ham-position" aria-hidden="true"></i></span></a>
            </div>
            <div id="lessonWay">
                <ul style="padding-left: 0px;">
                    <li vm-repeat="task in tasksArray" class="intrapersonal_active leftSide {{task.status}}">
                        <a id="task_hint" onclick="loadTask({{task.task_id}})">{{task.lp}}<span class="remove">.&nbsp;&nbsp;{{task.name}}</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div id="PageContent">
        <div id="page-leson-wrapper" style="position: relative">
            <h3 class="lesson_namber">Moduł {{currentLesson}}, lekcja <span id="currentPageSpan"></span></h3>
            <h1><strong>{{taskDataname}}</strong></h1>
            <div class="lesson_conntent">
                {{taskDatacontent}}
                <nav aria-label="..." class="center">
                    <ul class="pagination pagination-sm">
                        <li class="page-item">
                            <a class=" page-prev" onclick="prev();" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>
                        <li vm-repeat="page in pages" class="page-item">
                            <a class="page-link {{page.status}}" onclick="page_link({{page.index}});" task-id="page.task_id" data-page="page.index">{{page.id}}</a>
                        </li>
                        <li class="page-item">
                            <a class="page-next" onclick="next();" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <div id="page-console-and-application" class="fixed">
            <div class="console">
                <form style="position: relative">
                    <textarea spellcheck="false" class="code_input" id="yourcode" rows="10" placeholder=""></textarea><br />
                    <button id="button_runit" class="btn btn_code" type="button" onclick="runit()"><img src="Theme/Images/check-square.png" alt="" />SPRAWDŹ</button>
                </form>
                <div id="page-code">
                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
                    <script src="JavaScript/Libraries/skulpt.min.js" type="text/javascript"></script>
                    <script src="JavaScript/Libraries/skulpt-stdlib.js" type="text/javascript"></script>
                    <script type="text/javascript">

                        // output functions are configurable.  This one just appends some text
                        // to a pre element.

                        function outf(text) {
                            var mypre = document.getElementById("output");
                            mypre.innerHTML = mypre.innerHTML + text;
                        }
                        function builtinRead(x) {
                            if (Sk.builtinFiles === undefined || Sk.builtinFiles["files"][x] === undefined)
                                throw "File not found: '" + x + "'";
                            return Sk.builtinFiles["files"][x];
                        }
                        // Here's everything you need to run a python program in skulpt
                        // grab the code from your textarea
                        // get a reference to your pre element for output
                        // configure the output function
                        // call Sk.importMainWithBody()
                        function runit() {
                            var prog = document.getElementById("yourcode").value;
                            prog = prog.replace(/^\s*[\r\n]/gm, "");
                            var lastLine = prog.substr(prog.lastIndexOf("\n") + 1);
                            if (lastLine.replace(/^\s*/g, "") == "")
                                lastLine = prog.substr(prog.substr(prog.substr(0, prog.lastIndexOf("\n") - 1).lastIndexOf("\n") + 1));
                            if (lastLine.indexOf("print") == -1)
                                prog = prog.substr(0, prog.lastIndexOf("\n") == -1 ? 0 : prog.lastIndexOf("\n") + 1) + "print(" + lastLine + ")";
                            var mypre = document.getElementById("output");
                            mypre.innerHTML = '';
                            Sk.pre = "output";
                            Sk.configure({
                                output: outf, read: builtinRead, python3: true, execLimit: 1000, inputfun: function (str) {
                                    return window.prompt(str);
                                }, inputfunTakesPrompt: true
                            });
                            //(Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = 'mycanvas';
                            var myPromise = Sk.misceval.asyncToPromise(function () {
                                return Sk.importMainWithBody("<stdin>", false, prog, true);
                            });

                            myPromise.then(function (mod) {
                                console.log($Locals.pages[$Locals.currentPage].correct_answer);
                                var rawStr = $('#output').text().replace(/^\s+|\s+$/gm, '');
                                console.log(rawStr);
                                if ($Locals.pages[$Locals.currentPage].correct_answer == rawStr) {
                                    VM.logEvent(1, $Locals.currentTaskId, 'interpreter_started_with_success_with_correct', 'self');
                                    $($('.page-link')[$Locals.currentPage]).addClass('closed_page');
                                    var complete = true;
                                    $('.page-link').each(function () {
                                        if (!$(this).hasClass('closed_page')) {
                                            complete = false;
                                        }
                                    });
                                    if (complete == true) {
                                        $($('.leftSide')[$Locals.currentLesson]).addClass('closed');
                                    }
                                    $('#zadanie_sukces').modal('show');
                                } else {
                                    $Locals.launchCount = $Locals.launchCount + 1;
                                    console.log($Locals.launchCount);
                                    if ($Locals.border == $Locals.launchCount) {
                                        console.log('REVEAL!');
                                        $('#zadanie_podopowiedz').modal('show');
                                    }
                                    VM.logEvent(1, $Locals.currentTaskId, 'interpreter_started_with_success_but_notcorrect', 'self');
                                }
                            },
                                function (err) {
                                    var errStr = err.toString();
                                    var errLine = errStr.substr(errStr.indexOf('line')).match(/\d+/);
                                    var errDesc = errStr.substr(0, errStr.indexOf('on line') - 1);;
                                    var errMsg = 'Błąd!';
                                    $Locals.launchCount = $Locals.launchCount + 1;
                                    console.log($Locals.launchCount);
                                    if ($Locals.border == $Locals.launchCount) {
                                        console.log('REVEAL!');
                                        $('#zadanie_podopowiedz').modal('show');

                                        //                                    $(".podpowiedz_kod").siblings(".helper_code").show();
                                        //                                    $($(".podpowiedz_kod")[$Locals.currentPage]).show();
                                    }
                                    if (errLine != null)
                                        errMsg = 'Błąd w linii ' + parseInt(errLine, 10) + ':\n' + errDesc;
                                    outf(errMsg);
                                    VM.logEvent(1, $Locals.currentTaskId, 'interpreter_started_with_error', 'self');
                                    VM.logEvent(1, $Locals.currentTaskId, errStr, 'self');
                                });
                        }
                    </script>
                    <p><strong>Otrzymany wynik:</strong></p>
                    <pre id="output"></pre>
                </div>
            </div>
            <div id="Avatars">
                <center><img class="intelect_Paint" src="/Theme/Images/Avatars/intelect_Paint.png" alt="Tutaj powinien znajdować się awatar" style="width:300px;"></center>
                <center><img class="intelect_Music remove" src="/Theme/Images/Avatars/intelect_Music.png" alt="Tutaj powinien znajdować się awatar" style="width:150px;"></center>
                <center><img class="intelect_Sport remove" src="/Theme/Images/Avatars/intelect_Sport.png" alt="Tutaj powinien znajdować się awatar" style="width:150px;"></center>
            </div>
            <!--<div id="page-application">
            <div>
                <a class="user_hov" href="#"></a>
            </div>
            <div class="fixed">
                <div id="page-video-wrapper" class="aplikacja1" style="position: relative">
                    <div class=" sam_close sam_close_1"> <img src="Theme/Images/close.png" alt="" /></div>

                    <div>
                        <iframe width="100%" height="315" src="https://www.youtube.com/embed/lFwUtAUfCG8?rel=0" allowfullscreen></iframe>
                    </div>
                </div>
                <div style="clear: both"></div>
                <div id="page-video-wrapper" class="aplikacja1" style="position: relative">
                    <div class="sam_close sam_close_1"> <img src="Theme/Images/close.png" alt="" /></div>
                    <img id="kinetyczna" src="Theme/Images/kinetyczna/r1.png" class="img-responsive" alt="" />
                </div>
                <div style="clear: both"></div>
                <div id="page-video-wrapper" class="aplikacja2" style="position: relative">
                    <div class="sam_close sam_close_2"> <img src="Theme/Images/close.png" alt="" /></div>
                    <div>
                        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
                        <script src="JavaScript/Libraries/bootstrap.min.js"></script>
                        <a id="avatar_speek" href="#" data-toggle="tooltip" data-placement="left" title="Witaj właśnie rozpczynamy razem kurs! Cieszysz się?">
                            <img src="Theme/Images/avatars.png" class="img-responsive" alt="" />
                        </a>
                    </div>
                </div>
                <div style="clear: both"></div>
                <div id="page-video-wrapper" class="aplikacja3" style="position: relative">
                    <div class="sam_close sam_close_3"> <img src="Theme/Images/close.png" alt="" /></div>
                    <img id="wiersz" src="Theme/Images/wiersz/w1.png" class="img-responsive" alt="" />
                </div>
                <div style="clear: both"></div>
                <div id="page-video-wrapper" class="aplikacja4" style="position: relative;">
                    <div class="sam_close sam_close_4"> <img src="Theme/Images/close.png" alt="" /></div>
                    <script>
                        var sec = 0;
                        var singleTemplate = function (peopl) {
                            return '<tr><td> <img src="' + peopl.img + '" alt=""/></td> <td>' + peopl.name + '</td> <td>' + peopl.lastName + '</td></tr>';
                        }
                        var generateText = function (mode) {
                            var modes = {
                                0: [5, 6],
                                1: [2, 3, 4],
                                2: [5, 6]
                            }
                            var items = modes[mode];
                            var currentRandom = items[Math.floor(Math.random() * items.length)];
                            var template = "";
                            var people = [
                                {
                                    name: "Michał",
                                    lastName: "miecho",
                                    img: "Theme/Images/icon_people/icon1.png"
                                },
                                {
                                    name: "Jola",
                                    lastName: "julitaa",
                                    img: "Theme/Images/icon_people/icon2.png"
                                },
                                {
                                    name: "Kasia",
                                    lastName: "kasiulka",
                                    img: "Theme/Images/icon_people/icon3.png"
                                },
                                {
                                    name: "Mietek",
                                    lastName: "MIETEK200",
                                    img: "Theme/Images/icon_people/icon5.png"
                                },
                                {
                                    name: "Kasia",
                                    lastName: "kasiulka",
                                    img: "Theme/Images/icon_people/icon6.png"
                                },
                            ];
                            var user = {
                                "name": $Locals.userName,
                                "lastName": $Locals.userSurname
                            }
                            for (var i = 0; i < people.length; i++) {
                                if (i == currentRandom - 1) {
                                    template += singleTemplate(user);
                                }
                                template += singleTemplate(people[i]);
                            }
                            return template;
                        }
                    </script>
                    <p class="minutnik_p"> Ta strona zajmie Ci : 7 min.</p>
                    <p class="wyzwanie"> Podejmujesz wyzwanie?</p>
                    <p class="minutnik_p pol-star">Gotowy do startu! </p>
                    <a class="btn btn-primary btn-block btn-black btn_kurs btn_start" onclick="workingTimer();">START</a>
                    <div class="clock" data-timeup="420">
                        <span id="minutes">00</span>:<span id="seconds">00</span>
                    </div>
                    <button type="button" id="scoreboardBtn" style="display: none" class="btn btn-primary btn-block btn-black btn_sprawdz center-block"
                            onclick="showPList();">
                        Zobacz, który jesteś?
                    </button>
                </div>
                <div style="clear: both"></div>
            </div>
            <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">ZOBACZ KTÓRY JESTEŚ</h4>
                        </div>
                        <div class="modal-body">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>#</th>


                                        <th>Imie</th>
                                        <th>Pseudonim</th>

                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>-->
        </div>
    </div>
    <!--<div id="barIntelect" class="unli">
        <ul>
            <li><img src="Theme\Images\Intele\oie_transparent.png" alt="" style="width: 50px;"/></li>
            <li><img src="Theme\Images\Intele\oie_transparent2.png" alt="" style="width: 50px;" /></li>
            <li class="intrapersonal_active"><img src="Theme\Images\Intele\Interpersonal_active.png" alt="" style="width: 50px;" /></li>
            <li><img src="Theme\Images\Intele\oie_transparent.png" alt="" style="width: 50px;" /></li>
            <li><img src="Theme\Images\Intele\oie_transparent.png" alt="" style="width: 50px;" /></li>
            <li><img src="Theme\Images\Intele\oie_transparent.png" alt="" style="width: 50px;" /></li>
            <li><img src="Theme\Images\Intele\oie_transparentlive.png" alt="" style="width: 50px;" /></li>
            <li><img src="Theme\Images\Intele\oie_transparent.png" alt="" style="width: 50px;" /></li>
        </ul>
    </div>-->
    
</div>
<a href="https://www.facebook.com/groups/1832032537074429/" 
       target="_blank" 
       title="Kliknij, aby dołączyć do dyskusji"
       style="
            width: 100px; 
            display: block;
            text-align: center; 
            position: fixed;
            right: 5%;
            bottom: -10px;
            z-index:30;
            background-color: #4867AA;
            border-radius:10px;
            color: #fff;
            padding: 5px 0px 15px 0px;
        "> 
        <i class="fa fa-2x fa-facebook" aria-hidden="true"></i></a>


<!-- wybierz awatar -->
<div id="zadanie_sukces" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color:green"> Gratulacje! Udało Ci się rozwiazać zadanie! </h4>
            </div>
               <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Zamknij</button>
            </div>

        </div>
      
    </div>
</div>
<!-- zadanie sukces -->
<div id="zadanie_podopowiedz" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" style="color:green"> Czy napewno chcesz zobaczyć podpowiedź </h4>
            </div>
           
  <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">NIE</button>
             <button id="tak_chce" onclick="showIT();" type="button" class="btn btn-default" data-dismiss="modal">TAK</button>
              
                       
  </div>
        </div>
        
    </div>
</div>



<!-- wybierz awatar -->
<div id="wybierz_avatar" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Wybierz swój awatar</h4>
            </div>
            <div class="modal-body">
                <label class="vertical-center"><input onchange="setAvatar('icon1');" type="checkbox"> <img src="Theme/Images/icon_people/icon1.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon2');" type="checkbox"> <img src="Theme/Images/icon_people/icon2.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon3');" type="checkbox"> <img src="Theme/Images/icon_people/icon3.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon4');" type="checkbox"> <img src="Theme/Images/icon_people/icon4.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon5');" type="checkbox"> <img src="Theme/Images/icon_people/icon5.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon6');" type="checkbox"> <img src="Theme/Images/icon_people/icon6.png" alt=""/></label>
                <label class="vertical-center">
    <input onchange="setAvatar('icon7');" type="checkbox"> <img src="Theme/Images/icon_people/icon7.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon8');" type="checkbox"> <img src="Theme/Images/icon_people/icon8.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon9');" type="checkbox"> <img src="Theme/Images/icon_people/icon9.png" alt=""/></label>
                <label class="vertical-center"><input onchange="setAvatar('icon10');" type="checkbox"> <img src="Theme/Images/icon_people/icon10.png" alt=""/></label>
            </div>

        </div>
    </div>
</div>